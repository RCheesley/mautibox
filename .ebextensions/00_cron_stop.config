# Nullify cron files so that costly cron jobs can gracefully go to sleep during a deployment.

files:
  "/etc/cron.d/mautic":
    mode: "000644"
    owner: root
    group: root
    content: |
      # Cron file nullified to ensure deployment succeeds. Will be regenerated shortly.

  "/etc/cron.d/mautibox":
    mode: "000644"
    owner: root
    group: root
    content: |
      # Cron file nullified to ensure deployment succeeds. Will be regenerated shortly.

container_commands:
  01_cron_stop:
    command: ps ax | grep 'cron' | awk -F ' ' '{print $1}' | xargs sudo kill -9
    ignoreErrors: true
  02_console_stop:
    command: ps ax | grep 'console' | awk -F ' ' '{print $1}' | xargs sudo kill -9
    ignoreErrors: true
